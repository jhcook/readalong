# US1.2: Tokenize Text Into Sentences and Words

## State
DRAFT

## Problem Statement
To accurately sync audio with text and perform word-level highlighting, the raw text must be structured into sentences and individual word tokens that can be mapped to timestamps.

## User Story
As a system I want to break text into sentences and words So that highlighting can sync with audio.

## Acceptance Criteria
- [ ] **AC1**: Text is split into sentences using NLP rules.
- [ ] **AC2**: Sentences are split into words with punctuation handling.
- [ ] **AC3**: Tokenization works for English initially.
- [ ] **AC4**: Tokenization output is stored for alignment.

## Non-Functional Requirements
- Performance (Tokenization < 500ms for average article)
### Security
- [ ] No PII in logs
- [ ] No secrets in code
- [ ] Compliance docs checked if applicable
### Compliance
- [ ] No PII in logs
- [ ] No secrets in code
- [ ] Compliance docs checked if applicable
### Observability
- [ ] Is OpenTelemetry added for new flows?
- [ ] Are logs structured and governed?

## Linked ADRs
- ADR-003: Use Forced Alignment for Word-Level Highlighting
- ADR-009: Use a Unified Alignment Map Format

## Impact Analysis Summary
Components touched: Text Processing Engine (Shared Lib)
Workflows affected: Content Ingestion, Alignment
Risks identified: Complex punctuation or non-standard formatting might break sentence splitting.
**Architect Governance**:
- [ ] Do ADRs exist for major changes?
- [ ] Are architectural boundaries respected?
**Product Governance**:
- [ ] Are Acceptance Criteria clear and testable?
- [ ] Is the Impact Analysis complete?

## Test Strategy
How will we verify correctness?
- Unit tests with edge-case strings (e.g., "Mr. Smith went to Washington.", "Hello world!").
- Verify output structure matches ADR-009 schema.

**QA Governance**:
- [ ] Are there new tests for new features?
- [ ] Is the Test Strategy section in the Story comprehensive?

## Rollback Plan
How do we revert safely?
- Revert to previous tokenizer version.
- Flush alignment cache if structure changed incompatibly.
