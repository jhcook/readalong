# US2.1: Capture Parent’s Voice Locally

## State
COMMITTED

## Problem Statement
To enable the "read along" feature with a parent's voice while maintaining strict privacy standards, the system must capture audio directly on the device without sending it to the cloud.

## User Story
As a parent I want the system to capture my voice locally So that my child’s data stays private.

## Acceptance Criteria
- [x] **AC1**: Microphone access is requested with clear permission text.
- [x] **AC2**: Audio is processed locally (no cloud transmission).
- [x] **AC3**: Recording can be started/stopped manually.
- [x] **AC4**: Errors are shown if microphone access is denied.

## Non-Functional Requirements
- Privacy (Data sovereignty)
### Security
- [x] No PII in logs
- [x] No secrets in code
- [x] Compliance docs checked if applicable
### Compliance
- [x] No PII in logs
- [x] No secrets in code
- [x] Compliance docs checked if applicable
### Observability
- [x] Is OpenTelemetry added for new flows?
- [x] Are logs structured and governed?

## Linked ADRs
- ADR-001: Use Hybrid Local + Cloud Architecture
- ADR-008: Use a Local-Only Privacy Model by Default

## Impact Analysis Summary
Components touched: Audio Input Controller, Permissions Handler
Workflows affected: Recording/Reading
Risks identified: Browser/OS permission denial prevents feature usage.
**Architect Governance**:
- [x] Do ADRs exist for major changes?
- [x] Are architectural boundaries respected?
**Product Governance**:
- [x] Are Acceptance Criteria clear and testable?
- [x] Is the Impact Analysis complete?

## Test Strategy
How will we verify correctness?
- Manual testing of permission flows on different browsers/OS.
- Network traffic analysis to verify no audio data leaves the device.
- Unit tests for start/stop logic.

**QA Governance**:
- [x] Are there new tests for new features?
- [x] Is the Test Strategy section in the Story comprehensive?

## Rollback Plan
How do we revert safely?
- Revert audio capture logic.
