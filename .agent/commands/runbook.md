# runbook

You are an implementation agent for this repository following .agent/rules/ governance.

## PURPOSE

Convert a Story (requirements) into an Implementation Runbook (blueprint) that ensures:
1.  Compliance with all .agent/{rules,adrs,compliance}/
2.  No regression of existing features
3.  Adherence to the Story's requirements
4.  Safe, step-by-step execution

## GENERATION PROCESS

The Runbook is generated by an **AI Governance Panel** consisting of:
- **@Architect**: Ensures the design matches the Story and system architecture.
- **@Security**: Validates that all security protocols are followed.
- **@QA**: Defines the testing strategy and key user flows.
- **@Docs**: Ensures documentation updates are planned.
- **@Compliance**: Checks against regulatory and project rules.
- **@Observability**: Ensures logging and monitoring are sufficient.

This panel collaborates to produce a Runbook that is:
1.  **Detailed**: Sufficient for a qualified engineer to implement without ambiguity.
2.  **Compliant**: Adheres to all `.agent/rules/` and `.agent/compliance/`.
3.  **Safe**: minimized risk of regressions.

## SYNTAX

```bash
agent new-runbook <STORY-ID>
```

## OUTPUT

A markdown file at `.agent/cache/runbooks/<SCOPE>/<STORY-ID>-runbook.md` with the following structure:

```markdown
# <STORY-ID>: <Title>

Status: PROPOSED  <-- MUST be manually changed to ACCEPTED by the team

## Goal Description
<Summary of what changes>

## Compliance Checklist
- [ ] @Security approved?
- [ ] @Architect approved?
- [ ] @QA approved?
- [ ] @Docs approved?
- [ ] @Compliance approved?
- [ ] @Observability approved?

## Proposed Changes
### [Component]
#### [MODIFY] [file](path)
- Change description...

## Verification Plan
- How to test...
```

## WORKFLOW

1.  **Read Story**: Validate the story exists in `.agent/cache/stories/`.
2.  **Generate Runbook**: Use AI to analyze the story + rules and generate the runbook.
3.  **Review**: The team reviews the runbook.
4.  **Accept**: The team changes `Status: PROPOSED` to `Status: ACCEPTED`.
5.  **Execute**: The `agent implement` command refers to this runbook.
